name: CI Build
on: [push]
jobs:
  Hello-World-Job:
    runs-on: self-hosted
    steps:
      - name: Checkout code
        uses: actions/checkout@v3

      - name: Run AWS Codebuild
        run: |
          echo "Starting AWS CodeBuild with buildspec.yml..."
          aws codebuild start-build \
            --project-name codebuild-roleplay-academy-api-ci-${{ github.run_id }}-${{ github.run_attempt }} \
            --source-version ${{ github.sha }} \
            --environment-variables-override name=GITHUB_REF,value=${{ github.ref }} \
            --buildspec-override buildspec-ci.yml